
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>&lt;no title&gt; &#8212; UN45  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="docutils container" id="page">
<div class="aui-page-panel docutils container" id="main">
<div class="docutils container" id="main-header">
<div class="docutils container" id="breadcrumb-section">
<ol class="arabic simple">
<li><a class="reference external" href="index.html">Unravel 4.4</a></li>
<li><a class="reference external" href="Unravel-4.4_541197025.html">Unravel 4.4</a></li>
<li><a class="reference external" href="Installation-Guides_541393730.html">Installation
Guides</a></li>
<li><a class="reference external" href="541361096.html">Cloudera Distribution Including Apache Hadoop (CDH),
with Cloudera Manager (CM)</a></li>
</ol>
</div>
<p class="pagetitle rubric" id="title-heading">Unravel 4.4 : Step 2: Install Unravel Sensor Parcel
on CDH+CM</p>
</div>
<div class="view docutils container" id="content">
<div class="page-metadata docutils container">
Created by katch, last modified on Sep 10, 2018</div>
<div class="wiki-content group docutils container" id="main-content">
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="panel docutils container">
<div class="panelheader docutils container">
<strong>Table of Contents</strong></div>
<div class="panelcontent docutils container">
<div class="toc-macro rbtoc1541196937543 docutils container">
<ul class="simple">
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-_17zqoqqgx4oqIntroduction">Introduction</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-1.ObtainandDistributetheParcelfromUnravelServer">1. Obtain and Distribute the Parcel from
Unravel
Server</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-2.PuttheHiveHookJARinAUX_CLASSPATH">2. Put the Hive Hook JAR in
AUX_CLASSPATH</a><ul>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-IfSentryisEnabled:">If Sentry is
Enabled:</a></li>
</ul>
</li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-ConfigureGateway3.ConfiguretheGatewayAutomaticDeploymentofHiveInstrumentation">3. Configure the Gateway Automatic Deployment
of Hive
Instrumentation</a><ul>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-Setthehive-site.xmlSnippetinClouderaManager,andDeploytheHiveClientConfigurationtoGateways">Set the hive-site.xml Snippet in Cloudera
Manager, and Deploy the Hive Client
Configuration to
Gateways</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-CheckUnravelWebUI">Check Unravel Web
UI</a></li>
</ul>
</li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-4.ConfiguretheGatewayAutomaticDeploymentofSparkInstrumentation">4. Configure the Gateway Automatic Deployment
of Spark
Instrumentation</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-ConfigureJVMSensorForYARN5.Optional-ConfigureYARN-MapReduce(MR)JVMSensorCluster-Wide">5. Optional - Configure YARN - MapReduce (MR)
JVM Sensor
Cluster-Wide</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-6.(Optional)AdvancedConfiguration">6. (Optional) Advanced
Configuration</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-_troubleshootingTroubleshooting">Troubleshooting</a></li>
<li><a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-References">References</a></li>
</ul>
</div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-17zqoqqgx4oqintroduction">Introduction</p>
<p>This topic explains how to install the Unravel Sensor parcel
on CDH clusters using Cloudera Manager (CM). The parcel
includes Hive Hook and Spark instrumentation JARs. Hive Hook
is used to collect information about Hive queries in Hadoop.
The Spark instrumentation JARs measure Spark job
performance.</p>
<p>These instructions apply to Unravel Sensor 4.3</p>
<p>Before following these instructions, follow the steps in
<a class="reference external" href="https://unraveldata.atlassian.net/wiki/spaces/UN43/pages/226197657">Step 1: Install Unravel Server on
CDH+CM</a>.</p>
<div class="panel docutils container">
<div class="panelheader docutils container">
<strong>Workflow Summary</strong></div>
<div class="panelcontent docutils container">
<ol class="arabic simple">
<li>Obtain and distribute the parcel from Unravel
Server.</li>
<li>Put the Hive Hook JAR in <code class="docutils literal notranslate"><span class="pre">AUX_CLASSPATH</span></code>.</li>
<li>Configure the gateway automatic deployment of Hive
instrumentation.</li>
<li>Configure the gateway automatic deployment of Spark
instrumentation.</li>
</ol>
<p>confluence-information-macro confluence-information-macro-information</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
<p><a href="#id1"><span class="problematic" id="id2">``</span></a>HIGHLIGHTED&nbsp;<a href="#id3"><span class="problematic" id="id4">``</span></a>text and text with brackets (
{ } ), except where otherwise noted, indicate
where you must substitute your particular values
for the text.</p>
<p>When Active Directory Kerberos is
used,<code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code>must be a fully
qualified path or IP address.</p>
</div>
</div></blockquote>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>confluence-information-macro confluence-information-macro-information</p>
<blockquote>
<div><p>To Upgrade the Unravel Sensor</p>
<div class="confluence-information-macro-body docutils container">
<ul class="simple">
<li>Check the&nbsp;<code class="docutils literal notranslate"><span class="pre">UNRAVEL_SENSOR</span></code> parcel status in
Cloudera Manager.</li>
<li>If an upgrade is available complete <a class="reference external" href="#Step2:InstallUnravelSensorParcelonCDH+CM-ConfigureGateway">steps 3
through
5</a>
to perform the upgrade.</li>
</ul>
</div>
</div></blockquote>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-1-obtainanddistributetheparcelfromunravelserver">1. Obtain and Distribute the Parcel from Unravel
Server</p>
<ol class="arabic simple">
<li>In Cloudera Manager (CM), go to the <strong>Parcels</strong> page by
clicking the parcels glyph () on the top of the page.</li>
<li>Click <strong>Configuration</strong> to see the <strong>Parcel Settings</strong>
pop-up.</li>
<li>In the <strong>Remote Parcel Repository URLs</strong> section of the
<strong>Parcel Settings</strong> pop-up, click the <strong>+</strong> glyph to add
a new entry.</li>
<li>Add <code class="docutils literal notranslate"><span class="pre">http://{UNRAVEL_HOST_IP</span></code>}:3000/parcels/cdh{X.Y}/
(include trailing slash) where <code class="docutils literal notranslate"><span class="pre">X.Y</span></code> is the major,
minor version of CDH version you are running and
<code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code> is the host name or LAN IP address of
Unravel Server where <code class="docutils literal notranslate"><span class="pre">unravel_lr</span></code> is running. If you
are running more than one version of CDH (multiple
clusters) in Cloudera Manager, you can add more than one
parcel directory from the <code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code>.</li>
<li>Click <strong>Save</strong>.</li>
<li>Click <strong>Check for New Parcels</strong>.</li>
<li>On the <strong>Parcels</strong> page, pick a target cluster in the
<strong>Location</strong> box.</li>
<li>In the list of <strong>Parcel Names</strong>, find the
<code class="docutils literal notranslate"><span class="pre">UNRAVEL_SENSOR</span></code> parcel that matches the version of the
target cluster and click <strong>Download</strong>.</li>
<li>Click <strong>Distribute</strong>.</li>
<li>If you have an old parcel from Unravel, you can
deactivate it now.</li>
<li>Then click <strong>Activate</strong> on the new parcel.</li>
</ol>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-2-putthehivehookjarinaux-classpath">2. Put the Hive Hook JAR in AUX_CLASSPATH</p>
<ol class="arabic">
<li><p class="first">In Cloudera Manager, for the target cluster, click
<strong>Hive</strong> | <strong>Configuration</strong>, and search for
<code class="docutils literal notranslate"><span class="pre">hive-env</span></code>.</p>
</li>
<li><p class="first">In <strong>Gateway Client Environment Advanced Configuration
Snippet (Safety Valve)</strong> for <code class="docutils literal notranslate"><span class="pre">hive-env.sh</span></code> enter the
following exactly as shown, with no subsitutions:</p>
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</li>
<li><p class="first">In Cloudera Manager, click <strong>YARN</strong> | <strong>Configuration</strong>,
and&nbsp;search for <code class="docutils literal notranslate"><span class="pre">hadoop-env</span></code>.</p>
</li>
<li><p class="first">In <strong>Gateway Client Environment Advanced Configuration
Snippet (Safety Valve)</strong> for <code class="docutils literal notranslate"><span class="pre">hadoop-env.sh</span></code>, enter the
following exactly as shown, with <strong>no subsitutions</strong>:</p>
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</li>
</ol>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-ifsentryisenabled"><strong>If Sentry is Enabled:</strong></p>
<p>Sentry commands may also be needed to enable access to the
Hive Hook JAR file. Grant privileges on the JAR files to the
roles that run hive queries. Log into Beeline as user
<code class="docutils literal notranslate"><span class="pre">hive</span></code> and use the Hive <code class="docutils literal notranslate"><span class="pre">SQL</span> <span class="pre">GRANT</span></code> statement to do so.
For example (substitute&nbsp;<code class="docutils literal notranslate"><span class="pre">{ROLE}</span></code> as appropriate):</p>
<div class="docutils container">
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-configuregateway3-configurethegatewayautomaticdeploymentofhiveinstrumentation">3. Configure the Gateway Automatic Deployment of
Hive Instrumentation</p>
<p>Use Cloudera Manager to deploy the <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code>
snippet, which is the content of
<code class="docutils literal notranslate"><span class="pre">/usr/local/unravel/hive-hook/hive-site.xml.snip</span></code> on
Unravel Server.</p>
<div class="docutils container">
<p>confluence-information-macro confluence-information-macro-information</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
On a multi-host Unravel Server deployment, use
host2’s&nbsp;<code class="docutils literal notranslate"><span class="pre">/usr/local/unravel/hive-hook/hive-site.xml.snip</span></code></div>
</div></blockquote>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-setthehive-site-xmlsnippetinclouderamanager-anddeploythehiveclientconfigurationtogateways">Set the <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code> Snippet in Cloudera
Manager, and Deploy the Hive Client Configuration to
Gateways</p>
<p>In Cloudera Manager (CM):</p>
<ol class="arabic">
<li><p class="first">Go to Hive service.</p>
</li>
<li><p class="first">Select the <strong>Configuration</strong> tab.</p>
</li>
<li><p class="first">Search for <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code> in the middle of the
page.</p>
</li>
<li><p class="first">Add the xml snippet to <strong>Hive Client Advanced
Configuration Snippet for ``hive-site.xml``</strong> (Gateway
Default Group) (Click <strong>View as XML</strong>).</p>
<p>confluence-information-macro confluence-information-macro-warning</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
<p>If cluster has been configured with “Cloudera
Navigator”; the <code class="docutils literal notranslate"><span class="pre">hive.exec.post.hooks</span></code>
property will have exsiting value(s). Therefore
append the unravel’s value into the
existing&nbsp;<code class="docutils literal notranslate"><span class="pre">hive.exec.post.hooks</span></code> property
with a comma and no space. (see example below)</p>
<p><code class="docutils literal notranslate"><span class="pre">com.cloudera.navigator.audit.hive.HiveExecHookContext,org.apache.hadoop.hive.ql.hooks.LineageLogger,</span> <span class="pre">com.unraveldata.dataflow.hive.hook.HivePostHook</span></code></p>
<div class="line-block">
<div class="line"><strong>IMPORTANT!</strong> The “Hive Client Advanced
Configuration Snippet for hive-site.xml”
should only have the Unravel class.</div>
<div class="line">However, the “HiveServer2 Advanced
Configuration Snippet for hive-site.xml”
should have all 3 classes: 2 from Navigator
and 1 from Unravel.</div>
</div>
</div>
</div></blockquote>
</li>
<li><p class="first">Add the xml snippet to <strong>HiveServer2 Advanced
Configuration Snippet for</strong> <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code>. (Click
<strong>View as XML</strong>). Like above step, if properties
exists, append unravel’s value.</p>
</li>
<li><p class="first">Save the changes with optional comment “Unravel
snippet in <code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code><a href="#id5"><span class="problematic" id="id6">**</span></a>”
**</p>
</li>
<li><p class="first">Perform action <strong>Deploy Hive Client Configuration</strong> by
clicking the deploy glyph () or by using the
<strong>Actions</strong> pull-down menu.</p>
</li>
<li><p class="first">Restart the Hive service. (Cloudera Manager will
specify a restart which is not necessary for
activating these changes. You may act on CM’s
recommendation at a later time. )</p>
</li>
</ol>
<p>Again, monitor the situation to see if all Hive queries
are failing with a class not found or permission
problems. <strong>If they are failing</strong>, you can back-out the
<code class="docutils literal notranslate"><span class="pre">hive-site.xml</span></code> advanced snippet changes in Cloudera
Manager, deploy client configuration, and restart the
Hive service to revert, then refer to
<a class="reference external" href="https://unraveldata.atlassian.net/wiki/pages/resumedraft.action?draftId=53649678#Part2:InstallUnravelSensorParcelonCDH+CM-_troubleshooting">Troubleshooting</a>
below.</p>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-checkunravelwebui">Check Unravel Web UI</p>
<p>If queries are running fine and appearing in Unravel Web
UI, then you are done.</p>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-4-configurethegatewayautomaticdeploymentofsparkinstrumentation">4. Configure the Gateway Automatic Deployment of
Spark Instrumentation</p>
<ol class="arabic">
<li><p class="first">In Cloudera Manager, select the target cluster, then
select the Spark service.</p>
</li>
<li><p class="first">Select <strong>Configuration</strong>.</p>
</li>
<li><p class="first">Search for “<code class="docutils literal notranslate"><span class="pre">spark-defaults</span></code>”.</p>
</li>
<li><p class="first">In the&nbsp;<strong>Spark Client Advanced Configuration Snippet
(Safety Valve) for spark-conf/spark-defaults.conf</strong>,
enter the following text, substituting the highlighted
text for your particular values:</p>
<p>confluence-information-macro confluence-information-macro-note</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
<p>On a multi-host Unravel Server deployment, use the
fully qualified DNS or logical host2
for<code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code> which must be .</p>
</div>
</div></blockquote>
<p>confluence-information-macro confluence-information-macro-warning</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
<p>Copy the text below and paste it into the Cloudera
Manager’s <strong>Spark Client Advanced Configuration
Snippet (Safety Valve)</strong> box for
<strong>``spark-conf/spark-defaults.conf``</strong>. Then,
modify the value of <code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code>and
<code class="docutils literal notranslate"><span class="pre">SPARK_VERSION-X.Y</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">SPARK_VERSION</span></code><code class="docutils literal notranslate"><span class="pre">-X.Y</span></code>has the following
possible values: <code class="docutils literal notranslate"><span class="pre">spark-1.3</span></code> for Spark 1.3.x,
<code class="docutils literal notranslate"><span class="pre">spark-1.5</span></code> for Spark 1.5.x, <code class="docutils literal notranslate"><span class="pre">spark-1.6</span></code> for
Spark 1.6.x, and <code class="docutils literal notranslate"><span class="pre">spark-2.0</span></code> for Spark 2.0.x.</p>
</div>
</div></blockquote>
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</li>
</ol>
<ol class="arabic simple" start="5">
<li>Save changes.</li>
</ol>
<p>6. Deploy client configuration by clicking the deploy glyph
() or by using the <strong>Actions</strong> pull-down menu. Your
spark-shell will ensure new JVM containers are created with
the necessary extraJavaOptions for the spark drivers and
executors.</p>
<div class="docutils container">
<p>confluence-information-macro confluence-information-macro-warning</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
Monitor the situation to see if all Spark queries
are failing with a class not found or permission
problems.&nbsp;<strong>If they are failing</strong>, you can
back-out the&nbsp;<code class="docutils literal notranslate"><span class="pre">spark-defaults.conf</span></code>&nbsp;changes in
Cloudera Manager, re-deploy client configuration,
and then investigate and fix the issue.</div>
</div></blockquote>
<p>confluence-information-macro confluence-information-macro-information</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
In the case of yarn-client mode applications, the
Spark default configuration won’t be sufficient
because the driver JVM starts before the
configuration set through the SparkConf is applied.
(See&nbsp; <a class="reference external" href="https://spark.apache.org/docs/latest/configuration.html#runtime-environment">Apache’s Spark
Configuration</a>
for more information.)
See&nbsp;<a class="reference external" href="Individual-Applications-Submitted-Through-spark-submit_541164099.html#IndividualApplicationsSubmittedThroughspark-submit-SparkSubmit">here</a>
for how to set up Unravel Sensor for Spark to
profile specific Spark applications only, i.e.,
<em>per-application profiling</em> rather than
<em>cluster-wide profiling</em>.</div>
</div></blockquote>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-configurejvmsensorforyarn5-optional-configureyarn-mapreduce-mr-jvmsensorcluster-wide">5. Optional - Configure YARN - MapReduce (MR)
JVM Sensor Cluster-Wide</p>
<ol class="arabic">
<li><p class="first">In&nbsp;Cloudera Manager (CM) go to <strong>YARN</strong>&nbsp;service.</p>
</li>
<li><p class="first">Select the&nbsp;<strong>Configuration</strong>&nbsp;tab.</p>
</li>
<li><p class="first">Search for&nbsp;<strong>ApplicationMaster Java Opts Base</strong>and
concatenate the following xml block&nbsp;properties snippet
(ensure to start with a space and add below<strong>).</strong></p>
<p>confluence-information-macro confluence-information-macro-note</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
<p>Make sure that “-” is a minus sign. You need
to&nbsp;modify the value of <code class="docutils literal notranslate"><span class="pre">UNRAVEL_HOST_IP</span></code> with
your Unravel server IP address or a fully qualified
DNS. For multi-host Unravel installation, use the
IP address of Host2.</p>
</div>
</div></blockquote>
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</li>
<li><p class="first">Search for&nbsp;<strong>MapReduce Client Advanced Configuration
Snippet (Safety Valve) for ``mapred-site.xml``</strong>in the
middle of the page.</p>
</li>
<li><p class="first">Enter following xml four block&nbsp;properties snippet to
Gateway Default Group&nbsp;&nbsp;(Click&nbsp;<strong>View as XML</strong>).</p>
<div class="code panel pdl docutils container">
<div class="codecontent panelcontent pdl docutils container">
</div>
</div>
</li>
</ol>
<ol class="arabic simple" start="6">
<li>Save changes.</li>
</ol>
<p>7. Deploy client configuration by clicking the deploy glyph
() or by using the&nbsp;<strong>Actions</strong>&nbsp;pull-down menu.</p>
<p>8. Cloudera Manager will specify a restart which is not
necessary to effect these changes. (click&nbsp;<strong>Restart Stale
Services</strong>&nbsp;if that is visible. However, you can also perform
this later&nbsp;when you have a planned maintenance.)</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="docutils container">
<p>confluence-information-macro confluence-information-macro-tip</p>
<blockquote>
<div><div class="confluence-information-macro-body docutils container">
Monitor the situation and you should see in Unravel
UI a Resource Usage tab showing you mappers and
reducers when you view the Application page for any
completed MRjob. Restart is important&nbsp;for MR sensor
to be picked up by queries submitted via
Hiveserver2.</div>
</div></blockquote>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-6-optional-advancedconfiguration">6. (Optional) Advanced Configuration</p>
<ul class="simple">
<li>Configuration for high volume data: see <a class="reference external" href="Creating-Multiple-Workers-for-High-Volume-Data_541131395.html">Creating
Multiple Workers for High Volume
Data</a>.</li>
<li>Add LDAP users: see <a class="reference external" href="Integrating-LDAP-Authentication-for-Unravel-Web-UI_541328067.html">Integrating LDAP Authentication for
Unravel Web
UI</a>.</li>
</ul>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-troubleshootingtroubleshooting">Troubleshooting</p>
<div class="table-wrap docutils container">
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="26%" />
<col width="34%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Symptom</strong></td>
<td><strong>Problem</strong></td>
<td><strong>Remedy</strong></td>
</tr>
<tr class="row-even"><td><div class="first line-block">
<div class="line"><a href="#id7"><span class="problematic" id="id8">``</span></a>hadoop fs -ls /user/u</div>
</div>
<p>nravel/HOOK_RESULT_DIR/``
| shows directory does</p>
<blockquote class="last">
<div>not exist</div></blockquote>
</td>
<td><ul class="first simple">
<li>Unravel
Server RPM is
not yet
installed, or</li>
<li>Unravel
Server RPM is
installed on
a different
HDFS cluster,
or</li>
<li>HDFS home
directory for
Unravel does
not exist, or</li>
<li>kerberos/sent</li>
</ul>
<dl class="last docutils">
<dt>ry</dt>
<dd>actions are
needed</dd>
</dl>
</td>
<td><div class="first line-block">
<div class="line">Install Unravel RPM
on Unravel service
host:</div>
<div class="line"><a href="#id9"><span class="problematic" id="id10">``</span></a>sudo rpm -U unrav</div>
</div>
<p>el*.rpm*``
| <strong>OR</strong>
| Verify that</p>
<blockquote class="last">
<div><code class="docutils literal notranslate"><span class="pre">unravel</span></code> user
exists and has a
<code class="docutils literal notranslate"><span class="pre">/user/unravel/</span></code>
directory in HDFS
and unravel has
write access.</div></blockquote>
</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">ClassNotFound</span></code> error
for
<code class="docutils literal notranslate"><span class="pre">com.unraveldata.dataflo</span>
<span class="pre">w.hive.hook.HivePreHook</span></code>
during Hive query
execution</td>
<td>Unravel hive
hook JAR was not
found in in
<code class="docutils literal notranslate"><span class="pre">$HIVE_HOME/lib</span>
<span class="pre">/</span></code>.</td>
<td><div class="first line-block">
<div class="line">Check whether
UNRAVEL_SENSOR
parcel was
distributed and
activated in CM.</div>
<div class="line"><strong>OR</strong></div>
<div class="line">Put the Unravel
hive-hook JAR
corresponding
to&nbsp;<code class="docutils literal notranslate"><span class="pre">HIVE_VER</span></code>
in <code class="docutils literal notranslate"><span class="pre">JAR_DEST</span></code> on
each gateway by:</div>
<div class="line"><a href="#id11"><span class="problematic" id="id12">``</span></a>cd /usr/local/unr</div>
</div>
<p class="last">avel/hive-hook/;``
| <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">unravel-hive-H</span>
<span class="pre">IVE_VER*hook.jar</span> <span class="pre">JAR_</span>
<span class="pre">DEST</span></code></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="rubric" id="step2-installunravelsensorparceloncdh-cm-references">References</p>
<p><a class="reference external" href="http://www.cloudera.com/documentation/enterprise/5-3-x/topics/cm_mc_hive_udf.html#concept_nc3_mms_lr_unique_2">{+}</a><a class="reference external" href="http://www.cloudera.com/documentation/enterprise/5-3-x/topics/cm_mc_hive_udf.html#concept_nc3_mms_lr_unique_2+">http://www.cloudera.com/documentation/enterprise/5-3-x/topics/cm_mc_hive_udf.html#concept_nc3_mms_lr_unique_2+</a>
see Creating Permanent Functions.</p>
</div>
<div class="pagesection group docutils container">
<div class="pagesectionheader docutils container">
<p class="pagesectiontitle rubric" id="attachments">Attachments:</p>
</div>
<div class="greybox docutils container">
<a class="reference internal" href="images/icons/bullet_blue.gif"><img alt="image0" src="images/icons/bullet_blue.gif" style="width: 8px; height: 8px;" /></a>
<a class="reference external" href="attachments/541229840/541033431.png">DeployGlyph.png</a>
(image/png)
<a class="reference internal" href="images/icons/bullet_blue.gif"><img alt="image1" src="images/icons/bullet_blue.gif" style="width: 8px; height: 8px;" /></a>
<a class="reference external" href="attachments/541229840/541098884.png">package.png</a>
(image/png)</div>
</div>
</div>
</div>
<div class="docutils container" id="footer">
<div class="section footer-body docutils container">
<p>Document generated by Confluence on Nov 02, 2018 15:15</p>
<div class="docutils container" id="footer-logo">
<a class="reference external" href="http://www.atlassian.com/">Atlassian</a></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">UN45</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="userguide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced-topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendices.html">Appendices</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Unravel Data. All rights reserved.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/installation-cdh-step2.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>